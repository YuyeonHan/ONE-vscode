<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <button id="loadJsonOptionBtn">load Json Option 버튼</button><br>
  <button id="loadJsonSubgraphBtn">load Json Subgraph 버튼</button><br>
  <button id="loadJsonBufferBtn">load Json Buffer 버튼</button><br>

  <textarea id = "input model" style ="width: 100%; height: 1000px;"></textarea>
  <div id = "json model" style ="color: white; width: 200px; height: 200px;" ></div>
  <p>testest</p>
  <script>
    const vscode = acquireVsCodeApi();
    
    vscode.postMessage({
      command: "openJsonEditor",
    });

    const loadJsonOptionBtn = document.querySelector("#loadJsonOptionBtn");
    loadJsonOptionBtn.addEventListener("click", e => {
      e.preventDefault();
      vscode.postMessage({
        command: "loadJson", part: 'options'
      });
    });

    const loadJsonSubgraphBtn = document.querySelector("#loadJsonSubgraphBtn");
    loadJsonSubgraphBtn.addEventListener("click", e => {
      e.preventDefault();
      vscode.postMessage({
        command: "loadJson", part: 'subgraphs', currentIdx: 0,
      });
    });

    const loadJsonBufferBtn = document.querySelector("#loadJsonBufferBtn");
    loadJsonBufferBtn.addEventListener("click", e => {
      e.preventDefault();
      vscode.postMessage({
        command: "loadJson", part: 'buffers', currentIdx:2, pageIdx:1
      });
    });


    window.addEventListener("message", (e) => {
      console.log(e.data);
      if (e.data.command === "loadmodel") {
        console.log("postMessage호출  " + e);
        if(e.data.type === "modelpath") return;
        vscode.postMessage({ command: 'loadmodel', offset: e.data.offset + e.data.length + "" });
      }

      if(e.data.command ==="loadJson"){
        console.log(e.data);
        document.getElementById("input model").innerHTML = e.data.data;
      }


    })



  </script>
</body>

</html>